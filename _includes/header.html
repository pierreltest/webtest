<header class="header" role="banner">
<div class="header--utility">
  <div class="grid-construct  guidline__wrapper">
    <div class="guideline--vertical--left"></div>
    <script type="text/javascript">
      // Will be replaced with necessary info by Drupal.
      var blurbMenuItemTemplate = '<li class="utility__list-item  utility__list-item--show-lg utility__account-menu-item js-utility__account-menu-item"><a class="utility__cta" href="#"></a></li>';
      var blurbAccountMenuLoggedOut = [
        {
          text: '{{ site.account_menu[language].Join-Blurb }}'
          , url: 'https://secure.blurb.com/my/account/register'
          , type: 'url'
        }
        , {
          text: '{{ site.account_menu[language].Sign-In }}'
          , url: 'https://secure.blurb.com/my/account/login'
          , type: 'url'
        }
        , {
          text: '{{ site.account_menu[language].Help }}'
          , url: '/help'
          , type: 'url'
        }
      ]
      var blurbAccountMenuLoggedIn = [
        {
          text: '{{ site.account_menu[language].My-Dashboard }}'
          , url: '/my/dashboard'
          , type: 'url'
        }
        , {
          text: '{{ site.account_menu[language].Profile }}'
          , url: '/my/account/profile'
          , type: 'url'
        }
        , {
          text: '{{ site.account_menu[language].Settings }}'
          , url: 'https://secure.blurb.com/my/account'
          , type: 'url'
        }
        , {
          text: '{{ site.account_menu[language].Sign-out }}'
          , url: 'https://secure.blurb.com/my/account/logout'
          , type: 'url'
        }
        , {
          text: '{{ site.account_menu[language].Help }}'
          , url: '/help'
          , type: 'url'
        }
      ]
    </script>
    <ul class="utility__list js-utility__account-menu">
      <li class="utility__list-item  utility__list-item--search"
          data-controller="search">
        <div class="controls__search__form-wrap js-search-form">
          <form action="/search/site_search" class="controls__search__form clearfix">
            <span
              class="controls__search__field-icon  icon  magnify--black"></span>
            <!-- to remove -->
            <label for="search" class="controls__search__label">{{ site.strings[language].Search-colon }}</label>
            <input type="text" name="search"
                   class="controls__search__field" placeholder="{{ site.strings[language].Search-for-ellipsis }}">
            <button
              class="controls__search__button  controls__search__button--submit"
              type="submit">{{ site.strings[language].Submit }}
            </button>
            <button
              class="controls__search__button  controls__search__button--close  js-search-close"
              type="button">
              <span
                class="icon  controls__search__button--close__close-icon"></span>
            </button>
          </form>
        </div>
      </li>
      <li class="utility__list-item  utility__list-item--show-md-sm"><a
        class="utility__cta" href="/">{{ site.strings[language].Home }}</a></li>
      <li class="utility__list-item  utility__list-item--show-md-sm"><a
        class="utility__cta" href="/my/account/login"></a>{{ site.strings[language].Sign-in }} {{ site.strings[language].Mobile-or }} <a class="utility__cta"
                                                        href="/my/account/register">{{ site.strings[language].Join-Now }}</a>
      </li>
      <li
        class="utility__list-item  utility__list-item--social  utility__list-item--show-lg">
        <a class="utility__cta" href="http://www.facebook.com/BlurbBooks"><span
          class="icon  social--utility--facebook--blue"></span></a></li>
      <li
        class="utility__list-item  utility__list-item--social  utility__list-item--show-lg">
        <a class="utility__cta" href="http://twitter.com/blurbbooks"><span
          class="icon  social--utility--twitter--blue"></span></a></li>
      <li
        class="utility__list-item  utility__list-item--social utility__list-item--social--last  utility__list-item--show-lg">
        <a class="utility__cta"
           href="https://plus.google.com/104290472118001868543"><span
          class="icon  social--utility--googleplus--blue"></span></a></li>
    </ul>
    <div class="guideline--vertical--right"></div>
  </div>

</div>
<div class="header--main  header-nav--main">
<div class="guideline--horizontal"></div>
<div class="grid-construct  guidline__wrapper">
<div class="guideline--vertical--left"></div>
<a href="http://www.blurb.com/" title="Blurb" class="logo  logo--main  js-logo">
  <span class="icon  logo--icon--large  logo-main--sm"></span>
  <span class="icon  logo--icon--small  logo-main--mobile"></span>
</a>
  {% comment %}

  What is going on here? Basically, the top menus are here, but we import the
  child menus from includes. We do this because the child menu repeats
  horizontally across the bottom according to page.headerMenu, and we have to
  pass it parameters so that the right HTML can be generated without having
  to duplicate stuff.

  {% endcomment %}
  {% comment %}
  We can't use dynamic keys directly in include variables, so we pre-read and
  pre-assign the values before we get there.
  {% endcomment %}

  <div class="controls  controls--main  js-controls">
<nav class="controls__nav" data-controller="controlsNav">
  <ul class="controls__nav__list  js-controls-nav-list">
    <li class="controls__nav__list-item{%if page.headerMenu == 'create' %}  active{% endif %}">
      <div
        class="controls__nav__cta  cta  cta--button  js-parent-nav-link">
        <span class="icon  controls__nav__expand-icon"></span>{{ site.nav_headers[language].create }}
        <span class="icon  controls__nav__cta-icon"></span></div>
      {% assign localizedCreate = site.nav[language].create %}
      {% include header/submenu.html items=localizedCreate %}
    </li>
    <li class="controls__nav__list-item{%if page.headerMenu == 'formats-pricing' %}  active{% endif %}">
      <div
        class="controls__nav__cta  cta  cta--button  js-parent-nav-link">
        <span class="icon  controls__nav__expand-icon"></span>{{ site.nav_headers[language].formats-pricing }} <span class="icon  controls__nav__cta-icon"></span></div>
      {% assign localizedFormatsPricing = site.nav[language].formats-pricing %}
      {% include header/submenu.html items=localizedFormatsPricing %}
    </li>
    <li class="controls__nav__list-item{%if page.headerMenu == 'sell-distribute' %}  active{% endif %}">
      <div
        class="controls__nav__cta  cta  cta--button  js-parent-nav-link">
        <span class="icon  controls__nav__expand-icon"></span>{{ site.nav_headers[language].sell-distribute }} <span
        class="icon  controls__nav__cta-icon"></span></div>
      {% assign localizedSellDistribute = site.nav[language].sell-distribute %}
      {% include header/submenu.html items=localizedSellDistribute %}
    </li>
    <li class="controls__nav__list-item{%if page.headerMenu == 'community' %}  active{% endif %}">
      <div
        class="controls__nav__cta  cta  cta--button  js-parent-nav-link">
        <span class="icon  controls__nav__expand-icon"></span>{{ site.nav_headers[language].community }}
        <span class="icon  controls__nav__cta-icon"></span></div>
      {% assign localizedCommunity = site.nav[language].community %}
      {% include header/submenu.html items=localizedCommunity %}
    </li>
    <li class="controls__nav__list-item{%if page.headerMenu == 'bookstore' %}  active{% endif %}">
      <div
        class="controls__nav__cta  cta  cta--button  js-parent-nav-link">
        <span class="icon  controls__nav__expand-icon"></span>{{ site.nav_headers[language].bookstore }}
        <span class="icon  controls__nav__cta-icon"></span></div>
      {% assign localizedBookstore = site.nav[language].bookstore %}
      {% include header/submenu.html items=localizedBookstore %}
    </li>
  </ul>
</nav>
{% unless page.headerMenu == null %}
  <ul class="controls__current-subnav">
    {% comment %} If there's a better way to do this (e.g. use variable to refer
    to name of hash key), let me know! {% endcomment %}
    {% for navItem in site.nav[language] %}
      {% if navItem[0] == page.headerMenu %}
        {% assign itemsContent = navItem[1] %}
        {% include header/submenu.html subnav=true items=itemsContent %}
      {% endif %}
    {% endfor %}
  </ul>
{% endunless %}
  {% include footer--legal.html %}

<div class="guideline--vertical--right"></div>
</div>
</div>

<a href="#" class="header--mobile-nav-toggle  js-mobile-nav-toggle"><span
  class="icon  btn--mobile-nav--shadow"></span></a>
</div>
</header>
